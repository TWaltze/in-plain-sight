<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="styles/main.css">

        <!-- bower:js -->
        <!-- endbower -->

        <script src="js/vendor/sjcl.js"></script>
        <script src="js/message.js"></script>

        <script>
            window.onload = function() {
                function byteCount(s) {
                    return encodeURI(s).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length - 1;
                }

                function mbCount(s) {
                    return (byteCount(s) / 1048576).toFixed(2);
                }

                var message = new Message('foobar', 'Hello world!!');

                message.deconstruct(10);
                console.log('Number of hashes:', message.hashes.length);
                console.log('Total byte size:', mbCount(JSON.stringify(message.hashes)) + ' MB');

                var start = performance.now();
                console.log('Message:', message.reconstruct());
                var end = performance.now();
                console.log('Time to reconstruct:', end - start);
            }
        </script>
    </head>
    <body>
    </body>
</html>
